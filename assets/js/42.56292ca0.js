(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{556:function(e,n,s){"use strict";s.r(n);var t=s(4),a=Object(t.a)({},(function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("p",[e._v("我习惯了使用docker来部署各种应用，因为它确实足够简单，也不会污染我的宿主机环境，还可以方便地管理。所以，我的Jenkins也是部署在Docker中。")]),e._v(" "),s("p",[e._v("今天我尝试将本博客使用jenkins自动构建成基于"),s("code",[e._v("httpd")]),e._v("的Docker镜像时，jenkins pipeline输出日志出现了下面这个错误：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("11:19:21  + docker ps -a\n11:19:21  Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("p",[e._v("尽管我已经使用tools标签将docker引入了。而且想想，在docker容器（jenkins实例）中使用docker，总是有种套娃的感觉。")]),e._v(" "),s("p",[e._v("解决方案是把宿主机的"),s("code",[e._v("docker")]),e._v("挂载进jenkins的实例中，"),s("code",[e._v("docker-compose.yml")]),e._v("文件中加入下面的代码：")]),e._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[e._v("    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("volumes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" /var/run/docker.sock"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("/var/run/docker.sock \n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" /usr/bin/docker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("/usr/bin/docker\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("p",[e._v("这样，Jenkins就可以使用宿主机的"),s("code",[e._v("docker")]),e._v("了。")]),e._v(" "),s("br"),e._v(" "),s("hr"),e._v(" "),s("br"),e._v(" "),s("Vssue",{attrs:{title:e.$title}})],1)}),[],!1,null,null,null);n.default=a.exports}}]);