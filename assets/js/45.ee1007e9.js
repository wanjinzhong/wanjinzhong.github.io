(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{557:function(s,e,t){"use strict";t.r(e);var a=t(4),n=Object(a.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("目前常用的kubernates构建工具有：")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"}),t("ul",[t("li",[s._v("kubeadm: 集群，适用于生产环境。但是需要翻墙")]),s._v(" "),t("li",[s._v("microk8s: 单机，适用于开发和测试。也需要翻墙")]),s._v(" "),t("li",[s._v("minikube: 单机，适用于开发和测试。安装最简单。下文介绍minikube的安装方式")])])]),t("h3",{attrs:{id:"minikube的安装方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#minikube的安装方式"}},[s._v("#")]),s._v(" minikube的安装方式")]),s._v(" "),t("ol",[t("li",[s._v("前提条件：安装docker")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker.io \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("将当前用户加入docker组")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("usermod")]),s._v(" -aG docker "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$USER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" newgrp docker\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("下载minikube")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"4"}},[t("li",[s._v("将minikube放入环境变量路径")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" minikube-linux-amd64 /usr/local/bin/minikube\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"5"}},[t("li",[s._v("安装依赖")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("minikube start --vm-driver"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("none --image-mirror-country"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cn'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[s._v("--vm-driver=none: 直接将容器部署在本机（当系统为Linux的时候可以使用）")]),s._v(" "),t("p",[s._v("--driver=docker: 在本机上启动一个docker容器，将要部署的容器部署在这个docker容器中（docker in docker）")]),s._v(" "),t("p",[s._v("--image-mirror-country='cn': 指定镜像仓库为中国（registry.cn-hangzhou.aliyuncs.com/google_containers）而不是默认（k8s.gcr.io）")])]),s._v(" "),t("ol",{attrs:{start:"6"}},[t("li",[s._v("设置kubectl别名")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("kubectl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"minikube kubectl --"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"7"}},[t("li",[s._v("下载kubectl")])]),s._v(" "),t("p",[s._v("截止上一步，只是安装了minikube，还没安装kubectl。但是使用到"),t("code",[s._v("minikube kubectl")]),s._v("(设置别名后为"),t("code",[s._v("kubectl")]),s._v(")命令的时候会自动下载")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("kubectl get nodes\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("kubectl安装完成之后可以看到如下输出")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://img-1252535357.cos.ap-chengdu.myqcloud.com/blog/k8s/minikube.png",alt:"minikube"}})]),s._v(" "),t("p",[s._v("具体可参考官方文档："),t("a",{attrs:{href:"https://minikube.sigs.k8s.io/docs/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://minikube.sigs.k8s.io/docs/"),t("OutboundLink")],1)]),s._v(" "),t("ol",{attrs:{start:"8"}},[t("li",[s._v("添加kubectl自动补全")])]),s._v(" "),t("p",[s._v("要想在使用kubectl时使用"),t("code",[s._v("tab")]),s._v("键自动补全，需要"),t("code",[s._v("bash_completion")]),s._v("配合（如果没有，需要自行安装）")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("kubectl completion "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在 bash 中设置当前 shell 的自动补全，要先安装 bash-completion 包。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"source <(kubectl completion bash)"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ~/.bashrc "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在 bash shell 中永久的添加自动补全")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("br"),s._v(" "),t("hr"),s._v(" "),t("br"),s._v(" "),t("Vssue",{attrs:{title:s.$title}})],1)}),[],!1,null,null,null);e.default=n.exports}}]);