(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{537:function(t,a,s){"use strict";s.r(a);var e=s(4),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("正如另一篇文章（"),s("RouterLink",{attrs:{to:"/views/git/gitlab_ci_tips.html"}},[t._v("Gitlab CI技巧")]),t._v("）所言，我将会从github和自己的服务器上迁移博客到gitlab平台。Gitlab Pages和Github Pages有些许不同，这里记录一下他们的搭建的区别.")],1),t._v(" "),s("h2",{attrs:{id:"github-pages"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#github-pages"}},[t._v("#")]),t._v(" Github Pages")]),t._v(" "),s("ol",[s("li",[t._v("在自己的Github账户下面新建仓库"),s("code",[t._v("<username>.github.io")]),t._v("，如我的是"),s("code",[t._v("wanjinzhong.github.io")])]),t._v(" "),s("li",[t._v("在仓库里放入静态站点文件")]),t._v(" "),s("li",[t._v("在Project设置中开启pages即可。")])]),t._v(" "),s("h2",{attrs:{id:"gitlab-page"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-page"}},[t._v("#")]),t._v(" Gitlab Page")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("在自己的Gitlab账户下面新建仓库"),s("code",[t._v("<username>.gitlab.io")]),t._v("，如我的是"),s("code",[t._v("neilwan.gitlab.io")]),t._v(", 仓库地址是"),s("a",{attrs:{href:"https://gitlab.com/neilwan/neilwan.gitlab.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://gitlab.com/neilwan/neilwan.gitlab.io"),s("OutboundLink")],1),t._v(".")])]),t._v(" "),s("li",[s("p",[t._v("仓库内目录结构为")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(".\n├─ .gitlab-ci.yml\n└─ public\n    ├─ index.html\n    └─ ...\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("ul",[s("li",[s("p",[s("code",[t._v("pubic")]),t._v("目录是需要发布的静态文件的目录")])]),t._v(" "),s("li",[s("p",[s("code",[t._v(".gitlab-ci.yml")]),t._v("为Gitlab CI/CD部署的命令文件（必须），文件参考如下：")]),t._v(" "),s("div",{staticClass:"language-yml line-numbers-mode"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br"),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" alpine"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("latest\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("pages")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("stage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" deploy\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" echo 'Nothing to do"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("'\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("artifacts")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("paths")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" public\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("expire_in")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1 day\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("only")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" master\n")])]),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("p",[t._v("其中：")]),t._v(" "),s("ul",[s("li",[t._v("第3行：管道必须声明为"),s("code",[t._v("pages")])]),t._v(" "),s("li",[t._v("第7-9行：指定要发布的目录（"),s("code",[t._v("public")]),t._v("）")])])])])]),t._v(" "),s("li",[s("p",[t._v("每次推送到"),s("code",[t._v("master")]),t._v("分支之后，Gitlab都会自动部署public下的静态网站。")])]),t._v(" "),s("li",[s("p",[t._v("前往Project的"),s("code",[t._v("Settings -> Pages")]),t._v("查看，进入提供的地址便可访问部署的静态网站（第一次部署可能需要等待一段时间才能看到）")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://img-1252535357.cos.ap-chengdu.myqcloud.com/blog/gitlab_pages1.png",alt:"Gitlab Pages"}})])]),t._v(" "),s("li",[s("p",[t._v("如果要自定义域名，点击"),s("code",[t._v("New Domain")]),t._v("按钮，填写Domain地址之后点击"),s("code",[t._v("Create New Domain")])])]),t._v(" "),s("li",[s("p",[t._v("验证域名所有权：根据提示在域名商处添加2个DNS解析：")]),t._v(" "),s("ul",[s("li",[t._v("用于转发的DNS：CNAME")]),t._v(" "),s("li",[t._v("用于验证所有权的TXT")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://img-1252535357.cos.ap-chengdu.myqcloud.com/blog/gitlab_pages_new_domain.png",alt:"Gitlab Pages new Domain"}})])]),t._v(" "),s("li",[s("p",[t._v("配置完成之后点击"),s("code",[t._v("Save Changes")]),t._v("，稍后在"),s("code",[t._v("Settings > Pages")]),t._v("可以看到两个域名，一个是gitab自动分配的域名，一个是自己提供的域名，并且Gitlab也为我们自己提供的域名做了"),s("code",[t._v("https")])])])]),t._v(" "),s("br"),t._v(" "),s("hr"),t._v(" "),s("br"),t._v(" "),s("Vssue",{attrs:{title:t.$title}})],1)}),[],!1,null,null,null);a.default=n.exports}}]);