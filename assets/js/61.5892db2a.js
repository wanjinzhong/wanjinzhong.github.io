(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{573:function(t,s,a){"use strict";a.r(s);var r=a(4),e=Object(r.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("blockquote",[a("p",[t._v("本文转载自"),a("a",{attrs:{href:"https://www.jianshu.com/p/3bbd0cf2debe",target:"_blank",rel:"noopener noreferrer"}},[t._v("简书：Ubuntu下删除配置错误或者失败的安装包"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("命令行：")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" purge "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),t._v("dpkg -l"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" ^rc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("awk")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{ print "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$2")]),t._v(" }'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" purge "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),t._v("dpkg -l"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" iF"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("awk")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{ print "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$2")]),t._v(" }'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("sudo apt-get purge $(dpkg -l|grep ^rc|awk '{ print $2 }')")]),t._v(" "),a("p",[t._v("解释：\ndpkg -l 列出系统中所有安装的软件，如果是已经删除的软件（有残存的配置文件），那么该的软件包的状态是rc，即开头显赫为rc 然后是空格，然后是软件包的名称")]),t._v(" "),a("p",[t._v("|grep ^rc 的用处就是找出状态为rc的所有软件包，即以rc开头的行;")]),t._v(" "),a("p",[t._v("|awk '{ print $2 }' awk可以将输入的字符串用指定的分隔符进行分解，缺省情况下是空格，$2是表示第二个字段，也就是软件包的名称，因为第一个字段是 rc")]),t._v(" "),a("p",[t._v("$(......)是一个shell表示法，即里面包含括号中的命令输出的内容，实际上是以空格分隔的所有软件包的名称组成的一个字符串")]),t._v(" "),a("p",[t._v("aptitude purge 就是彻底删除软件包（包括配置文件），如果是残存的配置文件，也可以用这种方式删除\n其实，grep ^rc可以写成grep rc")]),t._v(" "),a("p",[t._v("我在安装某一deb包时发生配置错误，每次安装其他东西都要显示这条错误信息，很烦。\n用dpkg -l查看包的状态时，发现是iF。就是配置失败。\n于是，sudo apt-get purge $(dpkg -l|grep iF|awk '{ print $2 }')\n将其删除。")]),t._v(" "),a("br"),t._v(" "),a("hr"),t._v(" "),a("br"),t._v(" "),a("Vssue",{attrs:{title:t.$title}})],1)}),[],!1,null,null,null);s.default=e.exports}}]);